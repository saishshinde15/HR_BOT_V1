# ============================================================
# AWS Bedrock Configuration (Primary LLM and Embeddings)
# ============================================================
# Get your credentials from AWS Console
# Ensure Bedrock access is enabled in your AWS account
# Required for Amazon Bedrock Nova Lite (production model)
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here

AWS_REGION=us-east-1

# Model Configuration - Production Setup (v6.5)
# Nova Lite: $0.06/1M input tokens, $0.24/1M output tokens (93% cheaper than Nova Pro)
BEDROCK_MODEL=us.amazon.nova-lite-v1:0
BEDROCK_EMBED_MODEL=amazon.titan-embed-text-v2:0
BEDROCK_EMBED_REGION=us-east-1

# Alternative Models (for different use cases)
# BEDROCK_MODEL=us.amazon.nova-pro-v1:0  # Higher quality, 5x more expensive
# BEDROCK_MODEL=us.amazon.nova-micro-v1:0  # Even cheaper, lower quality

# ============================================================
# API Deck Configuration (HR System Integration)
# ============================================================
# Get your credentials from: https://developers.apideck.com
# After signing up, connect your HR platform (SAP, Zoho, BambooHR, etc.)
APIDECK_API_KEY=your_apideck_api_key_here
APIDECK_APP_ID=your_apideck_app_id_here
APIDECK_SERVICE_ID=your_hr_service_id_here

# ============================================================
# Semantic Cache Configuration (Production-Grade Caching)
# ============================================================
# Intelligent caching with semantic similarity matching
# Dramatically improves response times for similar queries
ENABLE_CACHE=true
CACHE_TTL_HOURS=72  # Cache expires after 72 hours (3 days)
CACHE_SIMILARITY_THRESHOLD=0.60  # 60% similarity threshold for cache hits

# Cache Performance:
# - First query: 4-8s (full execution)
# - Cached query: 0.1-0.5s (95% faster!)
# - Expected hit rate: 30-40% in production

# ============================================================
# Hybrid RAG Configuration (BM25 + Vector Search)
# ============================================================
# Document chunking settings
CHUNK_SIZE=800              # Characters per chunk
CHUNK_OVERLAP=200           # Overlap between chunks for context

# Retrieval settings
TOP_K_RESULTS=12            # Number of top results to retrieve (increased for 120+ documents)

# Hybrid search weights (must sum to 1.0)
BM25_WEIGHT=0.5             # Keyword/lexical search weight
VECTOR_WEIGHT=0.5           # Semantic/embedding search weight

# Performance tuning:
# - Increase BM25_WEIGHT for exact term matching (policy names, dates)
# - Increase VECTOR_WEIGHT for semantic understanding (meaning-based queries)

# RRF (Reciprocal Rank Fusion) Configuration for larger document sets
RRF_CANDIDATE_MULTIPLIER=12  # Candidate pool size multiplier (increased from 8 to 12 for 120+ docs)
RRF_BM25_WEIGHT=1.5          # BM25 weight in RRF scoring
RRF_VECTOR_WEIGHT=1.0        # Vector weight in RRF scoring

# Document Classification and Filtering
ENABLE_CATEGORY_FILTERING=true  # Enable automatic category-based filtering

# ============================================================
# S3 Configuration (v6.5)
# ============================================================
S3_BUCKET_NAME=hr-documents-1
S3_BUCKET_REGION=ap-south-1
S3_EXECUTIVE_PREFIX=executive/
S3_EMPLOYEE_PREFIX=employee/
S3_CACHE_DIR=/tmp  # Optional, defaults to system temp

# ============================================================
# Chainlit Authentication (v6.5)
# ============================================================
# Google OAuth2 Configuration
OAUTH_GOOGLE_CLIENT_ID=your_google_client_id
OAUTH_GOOGLE_CLIENT_SECRET=your_google_client_secret
CHAINLIT_OAUTH_CALLBACK_URL=http://localhost:8501/oauth/callback
CHAINLIT_BASE_URL=http://localhost:8501
CHAINLIT_AUTH_SECRET=your_chainlit_secret  # Generate with: chainlit create-secret

# ============================================================
# RBAC Email Whitelists (v6.5)
# ============================================================
EXECUTIVE_EMAILS=exec1@company.com,exec2@company.com
EMPLOYEE_EMAILS=emp1@company.com,emp2@company.com

# Developer/local fallback (set to true to allow header-based dev login)
# WARNING: Only enable this in local/dev environments
ALLOW_DEV_LOGIN=true
# Optional: default developer test email for header-based login
DEV_TEST_EMAIL=dev@company.com

# ============================================================
# Cache Configuration (v6.5)
# ============================================================
CACHE_TTL_HOURS=72  # Response cache TTL
S3_CACHE_TTL=86400  # S3 document cache TTL (24 hours)
